package org.digit.tracking.util;

import org.digit.tracking.data.model.FsmApplication;
import org.digit.tracking.data.model.FsmVehicleTrip;
import org.junit.Test;
import org.openapitools.model.Location;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.*;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class JsonUtilTest {
    Logger logger = LoggerFactory.getLogger(JsonUtilTest.class);

    @Test
    public void testFsmApplicationJsonStringToObject(){
        String input = "{\"totalCount\":2,\"responseInfo\":{\"apiId\":\"Rainmaker\",\"ver\":null,\"ts\":null,\"resMsgId\":\"uief87324\",\"msgId\":\"1694796531963|en_IN\",\"status\":\"successful\"},\"fsm\":[{\"citizen\":{\"id\":626,\"uuid\":\"a683ed2f-f04f-434b-9218-668f7a52812c\",\"userName\":\"e07ea483-197b-45f6-9384-3ff1d5dcbb6d\",\"name\":\"jkhvjhsjhk\",\"password\":null,\"mobileNumber\":\"6786786788\",\"tenantId\":\"pb\",\"salutation\":null,\"emailId\":null,\"altContactNumber\":null,\"pan\":null,\"aadhaarNumber\":null,\"permanentAddress\":null,\"permanentCity\":null,\"permanentPinCode\":null,\"correspondenceCity\":null,\"correspondencePinCode\":null,\"active\":true,\"dob\":null,\"pwdExpiryDate\":1703154415000,\"locale\":null,\"type\":\"CITIZEN\",\"signature\":null,\"accountLocked\":false,\"roles\":[{\"id\":null,\"name\":\"Citizen\",\"code\":\"CITIZEN\",\"tenantId\":\"pb\"}],\"bloodGroup\":null,\"identificationMark\":null,\"photo\":null,\"createdBy\":\"172\",\"createdDate\":1695378415000,\"lastModifiedBy\":\"172\",\"lastModifiedDate\":1695378415000,\"otpReference\":null,\"gender\":\"MALE\"},\"id\":\"ed229329-2b00-4cb7-aa02-0db7f0803528\",\"tenantId\":\"pb.amritsar\",\"applicationNo\":\"107-FSM-2023-09-22-000323\",\"description\":null,\"accountId\":\"a683ed2f-f04f-434b-9218-668f7a52812c\",\"additionalDetails\":{\"tripAmount\":1000},\"applicationStatus\":\"DSO_INPROGRESS\",\"source\":\"TELEPHONE\",\"sanitationtype\":null,\"propertyUsage\":\"RESIDENTIAL.APARTMENT\",\"vehicleType\":null,\"noOfTrips\":2,\"vehicleCapacity\":\"1000\",\"status\":null,\"vehicleId\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"driverId\":\"ccf4998c-e7af-4e4d-a97f-59c51bbf45e5\",\"vehicle\":null,\"dsoId\":\"f41eaa9e-4dfb-4292-8d00-033d3f847dec\",\"dso\":null,\"possibleServiceDate\":1695427200000,\"pitDetail\":{\"type\":null,\"id\":\"20033f78-b714-4d2c-a8e4-7be39f47f70e\",\"tenantId\":\"pb.amritsar\",\"height\":0.0,\"length\":0.0,\"width\":0.0,\"diameter\":0.0,\"distanceFromRoad\":0.0,\"auditDetails\":{\"createdBy\":\"2788a23b-476c-4235-84fa-b675e28ea465\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695378415200,\"lastModifiedTime\":1695457493309},\"additionalDetails\":null},\"address\":{\"tenantId\":\"pb.amritsar\",\"doorNo\":null,\"plotNo\":null,\"id\":\"50753c67-4366-41b3-be4b-da207f828c06\",\"landmark\":null,\"city\":null,\"district\":null,\"region\":null,\"state\":null,\"country\":null,\"pincode\":\"143001\",\"additionalDetails\":null,\"auditDetails\":{\"createdBy\":\"2788a23b-476c-4235-84fa-b675e28ea465\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695378415200,\"lastModifiedTime\":1695457493309},\"buildingName\":null,\"street\":null,\"slumName\":null,\"locality\":{\"code\":\"SUN04\",\"name\":\"Ajit Nagar - Area1\",\"label\":\"Locality\",\"latitude\":null,\"longitude\":null,\"children\":[],\"materializedPath\":null},\"geoLocation\":{\"id\":\"db43d66a-89ca-472f-84ee-ced406977c92\",\"latitude\":12.9129842,\"longitude\":77.6421466,\"additionalDetails\":null}},\"auditDetails\":{\"createdBy\":\"2788a23b-476c-4235-84fa-b675e28ea465\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695378415200,\"lastModifiedTime\":1695457493309},\"wasteCollected\":null,\"completedOn\":0,\"advanceAmount\":0.00,\"applicationType\":\"Adhoc Service\",\"oldApplicationNo\":null,\"paymentPreference\":null,\"processInstance\":null},{\"citizen\":{\"id\":612,\"uuid\":\"c4c9c063-1258-47a6-b474-3e4cefa95cfc\",\"userName\":\"d847d961-b62d-4544-83a6-3e81a04bc03e\",\"name\":\"NAvya\",\"password\":null,\"mobileNumber\":\"9876543210\",\"tenantId\":\"pb\",\"salutation\":null,\"emailId\":null,\"altContactNumber\":null,\"pan\":null,\"aadhaarNumber\":null,\"permanentAddress\":null,\"permanentCity\":null,\"permanentPinCode\":null,\"correspondenceCity\":null,\"correspondencePinCode\":null,\"active\":true,\"dob\":null,\"pwdExpiryDate\":1695291192000,\"locale\":null,\"type\":\"CITIZEN\",\"signature\":null,\"accountLocked\":false,\"roles\":[{\"id\":null,\"name\":\"Citizen\",\"code\":\"CITIZEN\",\"tenantId\":\"pb\"}],\"bloodGroup\":null,\"identificationMark\":null,\"photo\":null,\"createdBy\":\"172\",\"createdDate\":1694584962000,\"lastModifiedBy\":\"172\",\"lastModifiedDate\":1694584962000,\"otpReference\":null,\"gender\":\"MALE\"},\"id\":\"bff698fe-a4f2-4c9e-98f2-301396704cfb\",\"tenantId\":\"pb.amritsar\",\"applicationNo\":\"107-FSM-2023-09-13-000319\",\"description\":null,\"accountId\":\"c4c9c063-1258-47a6-b474-3e4cefa95cfc\",\"additionalDetails\":{\"tripAmount\":0},\"applicationStatus\":\"DSO_INPROGRESS\",\"source\":\"TELEPHONE\",\"sanitationtype\":null,\"propertyUsage\":\"RESIDENTIAL.INDEPENDENT_HOUSE\",\"vehicleType\":null,\"noOfTrips\":3,\"vehicleCapacity\":\"1000\",\"status\":null,\"vehicleId\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"driverId\":\"ccf4998c-e7af-4e4d-a97f-59c51bbf45e5\",\"vehicle\":null,\"dsoId\":\"f41eaa9e-4dfb-4292-8d00-033d3f847dec\",\"dso\":null,\"possibleServiceDate\":1694736000000,\"pitDetail\":{\"type\":null,\"id\":\"9f356d2d-4793-48b0-9f9d-a1822ce797f8\",\"tenantId\":\"pb.amritsar\",\"height\":0.0,\"length\":0.0,\"width\":0.0,\"diameter\":0.0,\"distanceFromRoad\":0.0,\"auditDetails\":{\"createdBy\":\"2788a23b-476c-4235-84fa-b675e28ea465\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1694584962533,\"lastModifiedTime\":1695379051284},\"additionalDetails\":null},\"address\":{\"tenantId\":\"pb.amritsar\",\"doorNo\":null,\"plotNo\":null,\"id\":\"31bdb91d-9cf0-48bd-aaa7-a63d9da10007\",\"landmark\":null,\"city\":\"Amritsar\",\"district\":null,\"region\":null,\"state\":null,\"country\":null,\"pincode\":\"143001\",\"additionalDetails\":null,\"auditDetails\":{\"createdBy\":\"2788a23b-476c-4235-84fa-b675e28ea465\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1694584962533,\"lastModifiedTime\":1695379051284},\"buildingName\":null,\"street\":null,\"slumName\":\"SL0001\",\"locality\":{\"code\":\"SUN04\",\"name\":\"Ajit Nagar - Area1\",\"label\":\"Locality\",\"latitude\":null,\"longitude\":null,\"children\":[],\"materializedPath\":null},\"geoLocation\":{\"id\":\"c6bcfa32-ff2b-4d1e-8353-05deb871fd47\",\"latitude\":0.0,\"longitude\":0.0,\"additionalDetails\":null}},\"auditDetails\":{\"createdBy\":\"2788a23b-476c-4235-84fa-b675e28ea465\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1694584962533,\"lastModifiedTime\":1695379051284},\"wasteCollected\":null,\"completedOn\":0,\"advanceAmount\":null,\"applicationType\":\"Adhoc Service\",\"oldApplicationNo\":null,\"paymentPreference\":null,\"processInstance\":null}],\"workflow\":null}\n";
        List<FsmApplication> fsmApplicationList = JsonUtil.getFSMObjectFromJson(input);
        assertEquals(2, fsmApplicationList.size());

        for (FsmApplication fsmApplication : fsmApplicationList){
            logger.info(fsmApplication.getApplicationStatus());
            logger.info(fsmApplication.getApplicationNo());
            logger.info(fsmApplication.getDriverId());
            logger.info(fsmApplication.getPickupLocationLatitude());
            logger.info(fsmApplication.getPickupLocationLongitude());
        }
    }
    @Test
    public void testFsmVehicleTripJsonStringToObject(){
        String input = "{\"responseInfo\":{\"apiId\":\"Rainmaker\",\"ver\":null,\"ts\":null,\"resMsgId\":\"uief87324\",\"msgId\":\"1694796531963|en_IN\",\"status\":\"successful\"},\"vehicleTrip\":[{\"id\":\"59aca15c-a184-4899-9524-7254c44495ab\",\"tenantId\":\"pb.amritsar\",\"tripOwner\":{\"id\":487,\"userName\":\"9998887780\",\"name\":\"maharaj pvt ldt\",\"type\":\"CITIZEN\",\"mobileNumber\":\"9998887780\",\"emailId\":\"abc@egov.com\",\"roles\":[{\"id\":null,\"name\":\"Citizen\",\"code\":\"CITIZEN\",\"tenantId\":\"pb\"},{\"id\":null,\"name\":\"FSM Desluding Operator\",\"code\":\"FSM_DSO\",\"tenantId\":\"pb\"}],\"tenantId\":\"pb\",\"uuid\":\"e16d966a-f89f-46de-a80f-017ace34221c\"},\"tripOwnerId\":\"e16d966a-f89f-46de-a80f-017ace34221c\",\"driver\":null,\"driverId\":null,\"vehicle\":{\"id\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"tenantId\":\"pb.amritsar\",\"registrationNumber\":\"KA 01 EC 8342\",\"model\":\"TATA\",\"type\":\"TATA.407\",\"tankCapacity\":1000.0,\"suctionType\":\"SEWER_SUCTION_MACHINE\",\"vehicleOwner\":\"ULB\",\"pollutionCertiValidTill\":946684800000,\"InsuranceCertValidTill\":946684800000,\"fitnessValidTill\":946684800000,\"roadTaxPaidTill\":946684800000,\"gpsEnabled\":true,\"additionalDetails\":{\"description\":\"\"},\"source\":\"Municipal records\",\"ownerId\":\"6416e1b5-38e4-49a5-90c5-3ba35be74992\",\"status\":\"ACTIVE\",\"owner\":null,\"auditDetails\":{\"createdBy\":\"37203135-c65b-4c90-ba62-a53ef25a9c94\",\"lastModifiedBy\":\"37203135-c65b-4c90-ba62-a53ef25a9c94\",\"createdTime\":1684390670637,\"lastModifiedTime\":1689329681008}},\"vehicleId\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"applicationNo\":\"107-VT-2023-09-23-000358\",\"status\":\"ACTIVE\",\"businessService\":\"FSM_VEHICLE_TRIP\",\"applicationStatus\":\"WAITING_FOR_DISPOSAL\",\"additionalDetails\":null,\"tripDetails\":[{\"id\":\"4b80de8e-2984-4860-921b-840b833ac9e1\",\"tenantId\":\"pb.amritsar\",\"referenceNo\":\"107-FSM-2023-09-22-000323\",\"referenceStatus\":\"DISPOSAL_IN_PROGRESS\",\"additionalDetails\":null,\"status\":\"ACTIVE\",\"itemStartTime\":1695457492403,\"itemEndTime\":1695457592403,\"volume\":1000.0,\"auditDetails\":{\"createdBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695457492985,\"lastModifiedTime\":1695457492985},\"trip_id\":null}],\"tripStartTime\":0,\"tripEndTime\":0,\"volumeCarried\":0.0,\"auditDetails\":{\"createdBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695457492985,\"lastModifiedTime\":1695457492985}},{\"id\":\"c68d6287-3f9f-4ead-9cca-6f369bd92797\",\"tenantId\":\"pb.amritsar\",\"tripOwner\":{\"id\":487,\"userName\":\"9998887780\",\"name\":\"maharaj pvt ldt\",\"type\":\"CITIZEN\",\"mobileNumber\":\"9998887780\",\"emailId\":\"abc@egov.com\",\"roles\":[{\"id\":null,\"name\":\"Citizen\",\"code\":\"CITIZEN\",\"tenantId\":\"pb\"},{\"id\":null,\"name\":\"FSM Desluding Operator\",\"code\":\"FSM_DSO\",\"tenantId\":\"pb\"}],\"tenantId\":\"pb\",\"uuid\":\"e16d966a-f89f-46de-a80f-017ace34221c\"},\"tripOwnerId\":\"e16d966a-f89f-46de-a80f-017ace34221c\",\"driver\":null,\"driverId\":null,\"vehicle\":{\"id\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"tenantId\":\"pb.amritsar\",\"registrationNumber\":\"KA 01 EC 8342\",\"model\":\"TATA\",\"type\":\"TATA.407\",\"tankCapacity\":1000.0,\"suctionType\":\"SEWER_SUCTION_MACHINE\",\"vehicleOwner\":\"ULB\",\"pollutionCertiValidTill\":946684800000,\"InsuranceCertValidTill\":946684800000,\"fitnessValidTill\":946684800000,\"roadTaxPaidTill\":946684800000,\"gpsEnabled\":true,\"additionalDetails\":{\"description\":\"\"},\"source\":\"Municipal records\",\"ownerId\":\"6416e1b5-38e4-49a5-90c5-3ba35be74992\",\"status\":\"ACTIVE\",\"owner\":null,\"auditDetails\":{\"createdBy\":\"37203135-c65b-4c90-ba62-a53ef25a9c94\",\"lastModifiedBy\":\"37203135-c65b-4c90-ba62-a53ef25a9c94\",\"createdTime\":1684390670637,\"lastModifiedTime\":1689329681008}},\"vehicleId\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"applicationNo\":\"107-VT-2023-09-23-000357\",\"status\":\"ACTIVE\",\"businessService\":\"FSM_VEHICLE_TRIP\",\"applicationStatus\":\"WAITING_FOR_DISPOSAL\",\"additionalDetails\":null,\"tripDetails\":[{\"id\":\"68e7efdf-1bb9-43a2-9b3a-0b69f7a579ee\",\"tenantId\":\"pb.amritsar\",\"referenceNo\":\"107-FSM-2023-09-22-000323\",\"referenceStatus\":\"DISPOSAL_IN_PROGRESS\",\"additionalDetails\":null,\"status\":\"ACTIVE\",\"itemStartTime\":1695457492403,\"itemEndTime\":1695457592403,\"volume\":1000.0,\"auditDetails\":{\"createdBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695457492931,\"lastModifiedTime\":1695457492931},\"trip_id\":null}],\"tripStartTime\":0,\"tripEndTime\":0,\"volumeCarried\":0.0,\"auditDetails\":{\"createdBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695457492931,\"lastModifiedTime\":1695457492931}}],\"totalCount\":2}\n";
        List<FsmVehicleTrip> fsmVehicleTripList = JsonUtil.getFSMVehicleTripObjectFromJson(input);
        //assertEquals(2, fsmApplicationList.size());

        for (FsmVehicleTrip fsmVehicleTrip : fsmVehicleTripList){
            logger.info(fsmVehicleTrip.getTripApplicationStatus());
            logger.info(fsmVehicleTrip.getTripApplicationNo());
            logger.info(fsmVehicleTrip.getBusinessService());
        }
    }

    @Test
    public void testFsmTripJsonUpdate() {
        //String jsonInput = "{\"responseInfo\":{\"apiId\":\"Rainmaker\",\"ver\":null,\"ts\":null,\"resMsgId\":\"uief87324\",\"msgId\":\"1694796531963|en_IN\",\"status\":\"successful\"},\"vehicleTrip\":[{\"id\":\"59aca15c-a184-4899-9524-7254c44495ab\",\"tenantId\":\"pb.amritsar\",\"tripOwner\":{\"id\":487,\"userName\":\"9998887780\",\"name\":\"maharaj pvt ldt\",\"type\":\"CITIZEN\",\"mobileNumber\":\"9998887780\",\"emailId\":\"abc@egov.com\",\"roles\":[{\"id\":null,\"name\":\"Citizen\",\"code\":\"CITIZEN\",\"tenantId\":\"pb\"},{\"id\":null,\"name\":\"FSM Desluding Operator\",\"code\":\"FSM_DSO\",\"tenantId\":\"pb\"}],\"tenantId\":\"pb\",\"uuid\":\"e16d966a-f89f-46de-a80f-017ace34221c\"},\"tripOwnerId\":\"e16d966a-f89f-46de-a80f-017ace34221c\",\"driver\":null,\"driverId\":null,\"vehicle\":{\"id\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"tenantId\":\"pb.amritsar\",\"registrationNumber\":\"KA 01 EC 8342\",\"model\":\"TATA\",\"type\":\"TATA.407\",\"tankCapacity\":1000.0,\"suctionType\":\"SEWER_SUCTION_MACHINE\",\"vehicleOwner\":\"ULB\",\"pollutionCertiValidTill\":946684800000,\"InsuranceCertValidTill\":946684800000,\"fitnessValidTill\":946684800000,\"roadTaxPaidTill\":946684800000,\"gpsEnabled\":true,\"additionalDetails\":{\"description\":\"\"},\"source\":\"Municipal records\",\"ownerId\":\"6416e1b5-38e4-49a5-90c5-3ba35be74992\",\"status\":\"ACTIVE\",\"owner\":null,\"auditDetails\":{\"createdBy\":\"37203135-c65b-4c90-ba62-a53ef25a9c94\",\"lastModifiedBy\":\"37203135-c65b-4c90-ba62-a53ef25a9c94\",\"createdTime\":1684390670637,\"lastModifiedTime\":1689329681008}},\"vehicleId\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"applicationNo\":\"107-VT-2023-09-23-000358\",\"status\":\"ACTIVE\",\"businessService\":\"FSM_VEHICLE_TRIP\",\"applicationStatus\":\"WAITING_FOR_DISPOSAL\",\"additionalDetails\":null,\"tripDetails\":[{\"id\":\"4b80de8e-2984-4860-921b-840b833ac9e1\",\"tenantId\":\"pb.amritsar\",\"referenceNo\":\"107-FSM-2023-09-22-000323\",\"referenceStatus\":\"DISPOSAL_IN_PROGRESS\",\"additionalDetails\":null,\"status\":\"ACTIVE\",\"itemStartTime\":1695457492403,\"itemEndTime\":1695457592403,\"volume\":1000.0,\"auditDetails\":{\"createdBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695457492985,\"lastModifiedTime\":1695457492985},\"trip_id\":null}],\"tripStartTime\":0,\"tripEndTime\":0,\"volumeCarried\":0.0,\"auditDetails\":{\"createdBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695457492985,\"lastModifiedTime\":1695457492985}},{\"id\":\"c68d6287-3f9f-4ead-9cca-6f369bd92797\",\"tenantId\":\"pb.amritsar\",\"tripOwner\":{\"id\":487,\"userName\":\"9998887780\",\"name\":\"maharaj pvt ldt\",\"type\":\"CITIZEN\",\"mobileNumber\":\"9998887780\",\"emailId\":\"abc@egov.com\",\"roles\":[{\"id\":null,\"name\":\"Citizen\",\"code\":\"CITIZEN\",\"tenantId\":\"pb\"},{\"id\":null,\"name\":\"FSM Desluding Operator\",\"code\":\"FSM_DSO\",\"tenantId\":\"pb\"}],\"tenantId\":\"pb\",\"uuid\":\"e16d966a-f89f-46de-a80f-017ace34221c\"},\"tripOwnerId\":\"e16d966a-f89f-46de-a80f-017ace34221c\",\"driver\":null,\"driverId\":null,\"vehicle\":{\"id\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"tenantId\":\"pb.amritsar\",\"registrationNumber\":\"KA 01 EC 8342\",\"model\":\"TATA\",\"type\":\"TATA.407\",\"tankCapacity\":1000.0,\"suctionType\":\"SEWER_SUCTION_MACHINE\",\"vehicleOwner\":\"ULB\",\"pollutionCertiValidTill\":946684800000,\"InsuranceCertValidTill\":946684800000,\"fitnessValidTill\":946684800000,\"roadTaxPaidTill\":946684800000,\"gpsEnabled\":true,\"additionalDetails\":{\"description\":\"\"},\"source\":\"Municipal records\",\"ownerId\":\"6416e1b5-38e4-49a5-90c5-3ba35be74992\",\"status\":\"ACTIVE\",\"owner\":null,\"auditDetails\":{\"createdBy\":\"37203135-c65b-4c90-ba62-a53ef25a9c94\",\"lastModifiedBy\":\"37203135-c65b-4c90-ba62-a53ef25a9c94\",\"createdTime\":1684390670637,\"lastModifiedTime\":1689329681008}},\"vehicleId\":\"2871cf25-0d3b-4844-91b1-02396a3f6147\",\"applicationNo\":\"107-VT-2023-09-23-000357\",\"status\":\"ACTIVE\",\"businessService\":\"FSM_VEHICLE_TRIP\",\"applicationStatus\":\"WAITING_FOR_DISPOSAL\",\"additionalDetails\":null,\"tripDetails\":[{\"id\":\"68e7efdf-1bb9-43a2-9b3a-0b69f7a579ee\",\"tenantId\":\"pb.amritsar\",\"referenceNo\":\"107-FSM-2023-09-22-000323\",\"referenceStatus\":\"DISPOSAL_IN_PROGRESS\",\"additionalDetails\":null,\"status\":\"ACTIVE\",\"itemStartTime\":1695457492403,\"itemEndTime\":1695457592403,\"volume\":1000.0,\"auditDetails\":{\"createdBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695457492931,\"lastModifiedTime\":1695457492931},\"trip_id\":null}],\"tripStartTime\":0,\"tripEndTime\":0,\"volumeCarried\":0.0,\"auditDetails\":{\"createdBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"lastModifiedBy\":\"7fe3c10d-86b4-4aba-adfa-360bcdafe5f1\",\"createdTime\":1695457492931,\"lastModifiedTime\":1695457492931}}],\"totalCount\":2}\n";
        String jsonInput = "{\"responseInfo\":{\"apiId\":\"Rainmaker\",\"ver\":null,\"ts\":null,\"resMsgId\":\"uief87324\",\"msgId\":\"1695453742631|en_IN\",\"status\":\"successful\"},\"vehicleTrip\":[{\"id\":\"b43066d6-8d24-485e-a84d-4e0842e0e3bc\",\"tenantId\":\"pg.citya\",\"tripOwner\":{\"id\":780,\"userName\":\"9876543211\",\"name\":\"testing\",\"type\":\"CITIZEN\",\"mobileNumber\":\"9876543211\",\"emailId\":\"abc@egov.com\",\"roles\":[{\"id\":null,\"name\":\"FSM Desluding Operator\",\"code\":\"FSM_DSO\",\"tenantId\":\"pg\"},{\"id\":null,\"name\":\"Citizen\",\"code\":\"CITIZEN\",\"tenantId\":\"pg\"}],\"tenantId\":\"pg\",\"uuid\":\"602dcd18-a9a0-4eb1-bf3d-d2d25402fc0c\"},\"tripOwnerId\":\"602dcd18-a9a0-4eb1-bf3d-d2d25402fc0c\",\"driver\":null,\"driverId\":null,\"vehicle\":{\"id\":\"5214b5fd-f760-4cc7-8982-39da770cafbc\",\"tenantId\":\"pg.citya\",\"registrationNumber\":\"AB 12 AS 1234\",\"model\":\"TATA\",\"type\":\"TATA.407\",\"tankCapacity\":1000.0,\"suctionType\":\"SEWER_SUCTION_MACHINE\",\"vehicleOwner\":\"ULB\",\"pollutionCertiValidTill\":0,\"InsuranceCertValidTill\":0,\"fitnessValidTill\":0,\"roadTaxPaidTill\":0,\"gpsEnabled\":true,\"additionalDetails\":{\"description\":\"\"},\"source\":\"Municipal records\",\"ownerId\":\"86cf4d58-1c57-4878-8a73-3cbef096bf97\",\"status\":\"ACTIVE\",\"owner\":null,\"auditDetails\":{\"createdBy\":\"4a747fc5-6a8c-4645-8748-fec35f1b9e17\",\"lastModifiedBy\":\"4a747fc5-6a8c-4645-8748-fec35f1b9e17\",\"createdTime\":1698499296513,\"lastModifiedTime\":1698501727515}},\"vehicleId\":\"5214b5fd-f760-4cc7-8982-39da770cafbc\",\"applicationNo\":\"1013-VT-2023-10-29-000364\",\"status\":\"ACTIVE\",\"businessService\":\"FSM_VEHICLE_TRIP\",\"applicationStatus\":\"WAITING_FOR_DISPOSAL\",\"endType\":null,\"additionalDetails\":null,\"tripDetails\":[{\"id\":\"b2cb05a1-b919-4164-9ec0-30c097bda270\",\"tenantId\":\"pg.citya\",\"referenceNo\":\"1013-FSM-2023-10-29-000331\",\"referenceStatus\":\"DISPOSAL_IN_PROGRESS\",\"additionalDetails\":null,\"status\":\"ACTIVE\",\"itemStartTime\":1698523526308,\"itemEndTime\":1698523626308,\"volume\":1000.0,\"auditDetails\":{\"createdBy\":\"cce1d4d8-c840-4912-851c-6aac8212e872\",\"lastModifiedBy\":\"cce1d4d8-c840-4912-851c-6aac8212e872\",\"createdTime\":1698523526811,\"lastModifiedTime\":1698523526811},\"trip_id\":null}],\"tripStartTime\":0,\"tripEndTime\":0,\"volumeCarried\":0.0,\"auditDetails\":{\"createdBy\":\"cce1d4d8-c840-4912-851c-6aac8212e872\",\"lastModifiedBy\":\"cce1d4d8-c840-4912-851c-6aac8212e872\",\"createdTime\":1698523526811,\"lastModifiedTime\":1698523526811}}],\"totalCount\":1}";
        Map<String, Object> jsonOutput = JsonUtil.updateFsmTripEndActionJson(jsonInput, "testEnd");

        logger.info(jsonInput);
        logger.info(JsonUtil.convertMapToJsonString(jsonOutput));
    }

    @Test
    public void testgetLocationObjectFromJson() {
        String input = "{\"ResponseInfo\":null,\"MdmsRes\":{\"FSM\":{\"FSTPPlantInfo\":[{\"PlantCode\":\"AMR001\",\"PlantName\":\"Amritsar FSTP\",\"active\":true,\"PlantType\":\"FSTP\",\"PlantLocation\":\"Amritsar\",\"latitude\":\"31.668470380301944\",\"longitude\":\"74.92091678992527\",\"PlusCode\":\"JQ2R+7G Khapar Kheri, Punjab\",\"PlantOperationalTimings\":\"10.00am-08.00pm\",\"PlantOperationalCapacityKLD\":\"50\",\"ULBS\":\"pb.jalandhar,pb.amritsar,pb.nayagaon\"},{\"PlantCode\":\"MOH002\",\"PlantName\":\"Mohali SeTPP\",\"active\":true,\"PlantType\":\"SeTP\",\"PlantLocation\":\"Mohali\",\"latitude\":\"30.676577729147507\",\"longitude\":\"76.73730230801068\",\"PlusCode\":\"MPFQ+V2 Sahibzada Ajit Singh Nagar, Punjab\",\"PlantOperationalTimings\":\"10.00am-06.00pm\",\"PlantOperationalCapacityKLD\":\"100\",\"ULBS\":\"pb.mohali,pb.phagwara,pb.nawanshahr,pb.derabassi\"}]}}}";
        Location location = JsonUtil.getLocationObjectFromJson(input);
        assertEquals(location.getLatitude(), 31.668470380301944f);
        assertEquals(location.getLongitude(), 74.92091678992527f);
    }

}
